var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(e){let t;return s(e,(e=>t=e))(),t}function c(e,t,n){e.$$.on_destroy.push(s(t,n))}function a(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function g(){return p("")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function x(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}let C;function k(e){C=e}function P(){if(!C)throw new Error("Function called outside component initialization");return C}function S(){const e=P();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,i)}))}}}const j=[],A=[],M=[],_=[],q=Promise.resolve();let E=!1;function R(e){M.push(e)}const O=new Set;let T=0;function N(){const e=C;do{for(;T<j.length;){const e=j[T];T++,k(e),B(e.$$)}for(k(null),j.length=0,T=0;A.length;)A.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];O.has(t)||(O.add(t),t())}M.length=0}while(j.length);for(;_.length;)_.pop()();E=!1,O.clear(),k(e)}function B(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const z=new Set;let D;function I(){D={r:0,c:[],p:D}}function F(){D.r||o(D.c),D=D.p}function U(e,t){e&&e.i&&(z.delete(e),e.i(t))}function L(e,t,n,o){if(e&&e.o){if(z.has(e))return;z.add(e),D.c.push((()=>{z.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function V(e){e&&e.c()}function J(e,n,r,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=e.$$;l&&l.m(n,r),s||R((()=>{const n=c.map(t).filter(i);a?a.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(R)}function Y(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function W(e,t){-1===e.$$.dirty[0]&&(j.push(e),E||(E=!0,q.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,i,r,s,l,c,a,u=[-1]){const f=C;k(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||f.$$.root};a&&a(h.root);let p=!1;if(h.ctx=r?r(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&l(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&W(t,e)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();i.intro&&U(t.$$.fragment),J(t,i.target,i.anchor,i.customElement),N()}k(f)}class X{$destroy(){Y(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const H="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Z=e=>e.map((e=>[Math.random(),e])).sort(((e,t)=>e[0]-t[0])).map((e=>e[1])),G=()=>{const e=Z([...Array(26).keys()]);return e.some(((e,t)=>e===t))?G():e.map((e=>H[e]))},Q=e=>e.replace(/[^\x00-\x7F]+/g,""),ee=[];function te(t,n=e){let o;const i=new Set;function s(e){if(r(t,e)&&(t=e,o)){const e=!ee.length;for(const e of i)e[1](),ee.push(e,t);if(e){for(let e=0;e<ee.length;e+=2)ee[e][0](ee[e+1]);ee.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,l=e){const c=[r,l];return i.add(c),1===i.size&&(o=n(s)||e),r(t),()=>{i.delete(c),0===i.size&&(o(),o=null)}}}}function ne(t,n,r){const l=!Array.isArray(t),c=l?[t]:t,a=n.length<2;return u=t=>{let r=!1;const u=[];let d=0,f=e;const h=()=>{if(d)return;f();const o=n(l?u[0]:u,t);a?t(o):f=i(o)?o:e},p=c.map(((e,t)=>s(e,(e=>{u[t]=e,d&=~(1<<t),r&&h()}),(()=>{d|=1<<t}))));return r=!0,h(),function(){o(p),f()}},{subscribe:te(r,u).subscribe};var u}const oe=te([{id:"",name:"",progress:null,solved:!1}].slice(1)),ie=te(""),re=te(null),se=te(`person-${Math.floor(1e4*Math.random())}`),le=te(null),ce=te(null),ae=te(!1),ue=new Map,de=ne([ie,se,ce,ae],(([e,t,n,o])=>({id:e,name:t,progress:n,solved:o}))),fe=ne(re,(()=>Date.now())),he=ne([oe,fe],(([e,t])=>new Map(e.map((e=>[e.id,e.solved?l(he).get(e.id)??Date.now()-t:Date.now()-t]))))),pe={Peer:window.Peer},me=0,ge=1,$e=2,ve=3,ye=new URLSearchParams(location.search).get("game"),be=null===ye,xe=e=>`${Math.floor(e)}`.padStart(2,"0"),we=e=>{const t=xe(e/6e4/60),n=xe(e/6e4%60),o=xe(e%6e4/1e3);return("00"!==t?`${t}:${n}:${o}`:`${n}:${o}`).replace(/^0+/g,"")},Ce=new pe.Peer,ke=[(e,t)=>{oe.update((n=>[...n,{id:e,name:t.name,progress:null,solved:!1}]))},(e,t)=>{re.set(t.problem)},(e,t)=>{be&&oe.update((n=>n.map((n=>n.id!==e?n:{...n,name:t.name,progress:t.progress,solved:t.solved}))))},(e,t)=>{if(be)return;const n=l(ie);oe.set(t.users.filter((e=>e.id!==n)))}],Pe=e=>new Promise((t=>{e.on("open",(()=>{var n;e.peer===ye&&le.set(e),ue.set(e.peer,e),e.on("data",(n=e.peer,e=>{ke[e.type]&&ke[e.type](n,e)})),e.on("close",(e=>()=>{oe.update((t=>t.filter((t=>t.id!==e)))),ue.delete(e)})(e.peer)),setTimeout((()=>{(e=>{e?.send({type:me,name:l(se)})})(e)}),100),t(e)}))})),Se=e=>ue.forEach((t=>t.send(e)));Ce.on("open",ie.set),Ce.on("connection",Pe);const je=[oe.subscribe((e=>{be&&Se({type:ve,users:[...e.map((e=>({...e,conn:null}))),l(de)]})})),de.subscribe((e=>{be?Se({type:ve,users:[...l(oe).map((e=>({...e,conn:null}))),e]}):l(le)?.send({type:$e,name:e.name,progress:e.progress,solved:e.solved})})),re.subscribe((e=>{null!==e&&(ce.set(null),ae.set(!1),be&&(oe.update((e=>e.map((e=>({...e,progress:null,solved:!1}))))),Se({type:ge,problem:e})))}))];function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function qe(e){return+e.replace(/px/,"")}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.random()*(t-e)+e;return Math.floor(o*Math.pow(10,n))/Math.pow(10,n)}function Re(e){return e[Ee(0,e.length)]}window.$cryptoduel$subscriptions&&window.$cryptoduel$subscriptions.forEach((e=>e())),window.$cryptoduel$subscriptions=je;var Oe=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function Te(e){return Math.log(e)/Math.log(1920)}var Ne=function(){function e(t){Ae(this,e);var n=t.initialPosition,o=t.direction,i=t.confettiRadius,r=t.confettiColors,s=t.emojis,l=t.emojiSize,c=t.canvasWidth,a=Ee(.9,1.7,3)*Te(c);this.confettiSpeed={x:a,y:a},this.finalConfettiSpeedX=Ee(.2,.6,3),this.rotationSpeed=s.length?.01:Ee(.03,.07,3)*Te(c),this.dragForceCoefficient=Ee(5e-4,9e-4,6),this.radius={x:i,y:i},this.initialRadius=i,this.rotationAngle="left"===o?Ee(0,.2,3):Ee(-.2,0,3),this.emojiSize=l,this.emojiRotationAngle=Ee(0,2*Math.PI),this.radiusYUpdateDirection="down";var u="left"===o?Ee(82,15)*Math.PI/180:Ee(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(u)),this.absSin=Math.abs(Math.sin(u));var d=Ee(-150,0),f={x:n.x+("left"===o?-d:d)*this.absCos,y:n.y-d*this.absSin};this.currentPosition=Object.assign({},f),this.initialPosition=Object.assign({},f),this.color=s.length?null:Re(r),this.emoji=s.length?Re(s):null,this.createdAt=(new Date).getTime(),this.direction=o}return _e(e,[{key:"draw",value:function(e){var t=this.currentPosition,n=this.radius,o=this.color,i=this.emoji,r=this.rotationAngle,s=this.emojiRotationAngle,l=this.emojiSize,c=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(t.x*c,t.y*c,n.x*c,n.y*c,r,0,2*Math.PI),e.fill()):i&&(e.font="".concat(l,"px serif"),e.save(),e.translate(c*t.x,c*t.y),e.rotate(s),e.textAlign="center",e.fillText(i,0,0),e.restore())}},{key:"updatePosition",value:function(e,t){var n=this.confettiSpeed,o=this.dragForceCoefficient,i=this.finalConfettiSpeedX,r=this.radiusYUpdateDirection,s=this.rotationSpeed,l=this.createdAt,c=this.direction,a=t-l;n.x>i&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=n.x*("left"===c?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*a+.00125*Math.pow(a,2)/2,this.rotationSpeed-=this.emoji?1e-4:1e-5*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI):"down"===r?(this.radius.y-=e*s,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*s,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+100}}]),e}();function Be(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function ze(e){var t=e.confettiRadius,n=void 0===t?6:t,o=e.confettiNumber,i=void 0===o?e.confettiesNumber||(e.emojis?40:250):o,r=e.confettiColors,s=void 0===r?Oe:r,l=e.emojis,c=void 0===l?e.emojies||[]:l,a=e.emojiSize,u=void 0===a?80:a;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:i,confettiColors:s,emojis:c,emojiSize:u}}var De=function(){function e(t){var n=this;Ae(this,e),this.canvasContext=t,this.shapes=[],this.promise=new Promise((function(e){return n.resolvePromise=e}))}return _e(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return!this.shapes.length&&(null===(e=this.resolvePromise)||void 0===e||e.call(this),!0)}},{key:"processShapes",value:function(e,t,n){var o=this,i=e.timeDelta,r=e.currentTime;this.shapes=this.shapes.filter((function(e){return e.updatePosition(i,r),e.draw(o.canvasContext),!n||e.getIsVisibleOnCanvas(t)}))}}]),e}(),Ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ae(this,e),this.activeConfettiBatches=[],this.canvas=t.canvas||Be(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return _e(e,[{key:"loop",value:function(){var e,t,n,o,i;this.requestAnimationFrameRequested=!1,e=this.canvas,t=window.devicePixelRatio,n=getComputedStyle(e),o=qe(n.getPropertyValue("width")),i=qe(n.getPropertyValue("height")),e.setAttribute("width",(o*t).toString()),e.setAttribute("height",(i*t).toString());var r=(new Date).getTime(),s=r-this.lastUpdated,l=this.canvas.offsetHeight,c=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter((function(e){return e.processShapes({timeDelta:s,currentTime:r},l,c),!c||!e.complete()})),this.iterationIndex++,this.queueAnimationFrameIfNeeded(r)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ze(e),n=t.confettiRadius,o=t.confettiNumber,i=t.confettiColors,r=t.emojis,s=t.emojiSize,l=this.canvas.getBoundingClientRect(),c=l.width,a=l.height,u=5*a/7,d={x:0,y:u},f={x:c,y:u},h=new De(this.canvasContext),p=0;p<o/2;p++){var m=new Ne({initialPosition:d,direction:"right",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:c}),g=new Ne({initialPosition:f,direction:"left",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:c});h.addShapes(m,g)}return this.activeConfettiBatches.push(h),this.queueAnimationFrameIfNeeded(),h.getBatchCompletePromise()}}]),e}();let Fe;setTimeout((()=>{Fe=new Ie({canvas:document.querySelector("#confetti")})}),10),window.$cryptoduel$confetti=Fe;function Ue(e,t,n){const o=e.slice();o[7]=t[n],o[9]=n;const i=o[2][o[9]];return o[1]=i,o}function Le(e){let t,n,o,i,r,s,l,c,f,g,b=e[7]+"",x=e[1]+"";return{c(){t=h("div"),n=h("div"),o=p(b),i=m(),r=h("div"),s=h("pre"),l=p(x),c=m(),v(n,"class","cipher-letter svelte-1x2ot2m"),v(r,"class","decrypted-letter svelte-1x2ot2m"),v(r,"tabindex","0"),w(r,"non-alphabetic",null===e[1]),v(t,"class","plain-encrypt-pair svelte-1x2ot2m")},m(d,h){u(d,t,h),a(t,n),a(n,o),a(t,i),a(t,r),a(r,s),a(s,l),a(t,c),f||(g=$(r,"keydown",e[3](e[9])),f=!0)},p(t,n){e=t,1&n&&b!==(b=e[7]+"")&&y(o,b),4&n&&x!==(x=e[1]+"")&&y(l,x),4&n&&w(r,"non-alphabetic",null===e[1])},d(e){e&&d(t),f=!1,g()}}}function Ve(t){let n,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=Le(Ue(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();v(n,"class","word svelte-1x2ot2m")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(13&t){let r;for(o=e[0],r=0;r<o.length;r+=1){const s=Ue(e,o,r);i[r]?i[r].p(s,t):(i[r]=Le(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function Je(e,t,n){let o,{word:i=""}=t,{replacement:r=Array(26).fill("")}=t,{disabled:s=!1}=t;const l=S();return e.$$set=e=>{"word"in e&&n(0,i=e.word),"replacement"in e&&n(1,r=e.replacement),"disabled"in e&&n(4,s=e.disabled)},e.$$.update=()=>{3&e.$$.dirty&&n(2,o=((e,t)=>[...e].map((e=>{const n=H.indexOf(e);return-1===n?null:t[n]})))(i,r))},[i,r,o,e=>t=>{s||l("replace",{from:i[e],to:t.key.toUpperCase()})},s]}class Ye extends X{constructor(e){super(),K(this,e,Je,Ve,r,{word:0,replacement:1,disabled:4})}}function We(e,t,n){const o=e.slice();return o[9]=t[n],o}function Ke(e){let t,n,o,i,r,s,l=e[0].author+"",c=e[3],g=[];for(let t=0;t<c.length;t+=1)g[t]=Xe(We(e,c,t));const $=e=>L(g[e],1,1,(()=>{g[e]=null}));return{c(){t=h("p"),n=p("Solve this quote by "),o=p(l),i=m(),r=h("div");for(let e=0;e<g.length;e+=1)g[e].c();v(t,"class","svelte-xqyi96"),v(r,"class","cryptogram svelte-xqyi96"),w(r,"solved",e[2])},m(e,l){u(e,t,l),a(t,n),a(t,o),u(e,i,l),u(e,r,l);for(let e=0;e<g.length;e+=1)g[e].m(r,null);s=!0},p(e,t){if((!s||1&t)&&l!==(l=e[0].author+"")&&y(o,l),30&t){let n;for(c=e[3],n=0;n<c.length;n+=1){const o=We(e,c,n);g[n]?(g[n].p(o,t),U(g[n],1)):(g[n]=Xe(o),g[n].c(),U(g[n],1),g[n].m(r,null))}for(I(),n=c.length;n<g.length;n+=1)$(n);F()}4&t&&w(r,"solved",e[2])},i(e){if(!s){for(let e=0;e<c.length;e+=1)U(g[e]);s=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)L(g[e]);s=!1},d(e){e&&d(t),e&&d(i),e&&d(r),f(g,e)}}}function Xe(e){let t,n;return t=new Ye({props:{word:e[9],replacement:e[1],disabled:e[2]}}),t.$on("replace",e[5]),{c(){V(t.$$.fragment)},m(e,o){J(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.word=e[9]),2&n&&(o.replacement=e[1]),4&n&&(o.disabled=e[2]),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function He(e){let t,n,o=e[0]&&Ke(e);return{c(){o&&o.c(),t=g()},m(e,i){o&&o.m(e,i),u(e,t,i),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&U(o,1)):(o=Ke(e),o.c(),U(o,1),o.m(t.parentNode,t)):o&&(I(),L(o,1,1,(()=>{o=null})),F())},i(e){n||(U(o),n=!0)},o(e){L(o),n=!1},d(e){o&&o.d(e),e&&d(t)}}}function Ze(e,t,n){let o,i,{problem:r=null}=t;const s=S();let l=Array(26).fill("");const c=({from:e,to:t})=>{if((1!==t.length||!/[a-zA-Z]/.test(t))&&"BACKSPACE"!==t)return;const o=[...l];o[H.indexOf(e)]="BACKSPACE"===t?"":t,n(1,l=o)},a=(e,t)=>[...t].map((t=>H.includes(t)&&""!==e[H.indexOf(t)]));return e.$$set=e=>{"problem"in e&&n(0,r=e.problem)},e.$$.update=()=>{1&e.$$.dirty&&n(1,l=Array(26).fill("")),1&e.$$.dirty&&n(3,o=(e=>[...e.split(/\s+/g)])(r?.ciphertext??"")),3&e.$$.dirty&&n(2,i=((e,t)=>!!t&&[...t.ciphertext].every(((n,o)=>!H.includes(n)||t.plaintext[o]===e[H.indexOf(n)])))(l,r)),4&e.$$.dirty&&i&&s("solved"),3&e.$$.dirty&&s("progress",{progress:a(l,r?.ciphertext??"")}),e.$$.dirty},[r,l,i,o,c,e=>c(e.detail)]}class Ge extends X{constructor(e){super(),K(this,e,Ze,He,r,{problem:0})}}function Qe(t){let n,o,i,r,s,l,c;return{c(){n=h("div"),o=h("label"),o.textContent="Username",i=m(),r=h("input"),v(o,"for","username"),v(r,"type","text"),v(r,"id","username"),v(r,"name","username"),r.disabled=s=null!==t[2],v(n,"class","name-chooser svelte-1mwrz3m")},m(e,s){u(e,n,s),a(n,o),a(n,i),a(n,r),b(r,t[3]),l||(c=$(r,"input",t[4]),l=!0)},p(e,[t]){4&t&&s!==(s=null!==e[2])&&(r.disabled=s),8&t&&r.value!==e[3]&&b(r,e[3])},i:e,o:e,d(e){e&&d(n),l=!1,c()}}}function et(t,n,o){let i,r,l=e,c=()=>(l(),l=s(d,(e=>o(2,i=e))),d),a=e,u=()=>(a(),a=s(f,(e=>o(3,r=e))),f);t.$$.on_destroy.push((()=>l())),t.$$.on_destroy.push((()=>a()));let{gameProblem:d=re}=n;c();let{name:f=se}=n;return u(),t.$$set=e=>{"gameProblem"in e&&c(o(0,d=e.gameProblem)),"name"in e&&u(o(1,f=e.name))},[d,f,i,r,function(){r=this.value,f.set(r)}]}class tt extends X{constructor(e){super(),K(this,e,et,Qe,r,{gameProblem:0,name:1})}}function nt(t){let n,o,i,r,s,l,c,f,g=t[1]?"Join Link (copied)":"Copy Join Link";return{c(){n=h("div"),o=h("button"),i=p(g),r=m(),s=h("a"),l=p(t[2]),v(o,"class","join-link svelte-vczin0"),v(s,"href",t[2]),v(n,"class","join-links svelte-vczin0")},m(e,d){u(e,n,d),a(n,o),a(o,i),a(n,r),a(n,s),a(s,l),c||(f=$(o,"click",t[3]),c=!0)},p(e,[t]){2&t&&g!==(g=e[1]?"Join Link (copied)":"Copy Join Link")&&y(i,g),4&t&&y(l,e[2]),4&t&&v(s,"href",e[2])},i:e,o:e,d(e){e&&d(n),c=!1,f()}}}function ot(t,n,o){let i,r,l=e,c=()=>(l(),l=s(a,(e=>o(4,r=e))),a);t.$$.on_destroy.push((()=>l()));let{id:a=ie}=n;c();let u=!1;return t.$$set=e=>{"id"in e&&c(o(0,a=e.id))},t.$$.update=()=>{16&t.$$.dirty&&o(2,i=`${location.href}?game=${encodeURIComponent(r)}`)},[a,u,i,()=>{navigator.clipboard.writeText(i),o(1,u=!0)},r]}class it extends X{constructor(e){super(),K(this,e,ot,nt,r,{id:0})}}function rt(e,t,n){const o=e.slice();return o[7]=t[n],o}function st(e,t,n){const o=e.slice();return o[10]=t[n],o}function lt(e){let t;return{c(){t=h("div"),v(t,"class","progress-item svelte-16730xu"),w(t,"has-done",e[10])},m(e,n){u(e,t,n)},p(e,n){24&n&&w(t,"has-done",e[10])},d(e){e&&d(t)}}}function ct(e){let t,n,o,i,r,s,l,c=e[7].name+"",g=e[7].progress??e[3],$=[];for(let t=0;t<g.length;t+=1)$[t]=lt(st(e,g,t));return{c(){t=h("div"),n=h("p"),o=p(c),i=p(":"),r=m(),s=h("div");for(let e=0;e<$.length;e+=1)$[e].c();l=m(),v(s,"class","opponent-progress svelte-16730xu"),v(t,"class","user-container svelte-16730xu"),x(t,"--desc","'SOLVED ("+we(e[5].get(e[7].id)??0)+")'"),w(t,"solved",e[7].solved)},m(e,c){u(e,t,c),a(t,n),a(n,o),a(n,i),a(t,r),a(t,s);for(let e=0;e<$.length;e+=1)$[e].m(s,null);a(t,l)},p(e,n){if(16&n&&c!==(c=e[7].name+"")&&y(o,c),24&n){let t;for(g=e[7].progress??e[3],t=0;t<g.length;t+=1){const o=st(e,g,t);$[t]?$[t].p(o,n):($[t]=lt(o),$[t].c(),$[t].m(s,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=g.length}48&n&&x(t,"--desc","'SOLVED ("+we(e[5].get(e[7].id)??0)+")'"),16&n&&w(t,"solved",e[7].solved)},d(e){e&&d(t),f($,e)}}}function at(t){let n,o=t[4],i=[];for(let e=0;e<o.length;e+=1)i[e]=ct(rt(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();v(n,"class","opponent-progress-container svelte-16730xu")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(56&t){let r;for(o=e[4],r=0;r<o.length;r+=1){const s=rt(e,o,r);i[r]?i[r].p(s,t):(i[r]=ct(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function ut(t,n,o){let i,r,l,c,a=e,u=()=>(a(),a=s(g,(e=>o(6,r=e))),g),d=e,f=()=>(d(),d=s(m,(e=>o(4,l=e))),m),h=e,p=()=>(h(),h=s($,(e=>o(5,c=e))),$);t.$$.on_destroy.push((()=>a())),t.$$.on_destroy.push((()=>d())),t.$$.on_destroy.push((()=>h()));let{users:m=oe}=n;f();let{gameProblem:g=re}=n;u();let{timeTakenByOpponents:$=he}=n;return p(),t.$$set=e=>{"users"in e&&f(o(0,m=e.users)),"gameProblem"in e&&u(o(1,g=e.gameProblem)),"timeTakenByOpponents"in e&&p(o(2,$=e.timeTakenByOpponents))},t.$$.update=()=>{var e;64&t.$$.dirty&&o(3,i=null===(e=r)?[]:[...e.ciphertext].map((e=>!1)))},[m,g,$,i,l,c,r]}class dt extends X{constructor(e){super(),K(this,e,ut,at,r,{users:0,gameProblem:1,timeTakenByOpponents:2})}}function ft(t){let n,o={ctx:t,current:null,token:null,hasCatch:!1,pending:gt,then:mt,catch:pt,value:7};var i;return function(e,t){const n=t.token={};function o(e,o,i,r){if(t.token!==n)return;t.resolved=r;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const l=e&&(t.current=e)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(I(),L(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),F())})):t.block.d(1),l.c(),U(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[o]=l),c&&N()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=P();if(e.then((e=>{k(n),o(t.then,1,t.value,e),k(null)}),(e=>{if(k(n),o(t.catch,2,t.error,e),k(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var i}((i=ye??"",new Promise((e=>{const t=ie.subscribe((n=>{if(""===n)return;const o=Ce.connect(i);setTimeout((()=>t())),Pe(o).then(e)}))}))),o),{c(){n=g(),o.block.c()},m(e,t){u(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,n){!function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(o,t=e,n)},i:e,o:e,d(e){e&&d(n),o.block.d(e),o.token=null,o=null}}}function ht(t){let n,o;return n=new it({}),{c(){V(n.$$.fragment)},m(e,t){J(n,e,t),o=!0},p:e,i(e){o||(U(n.$$.fragment,e),o=!0)},o(e){L(n.$$.fragment,e),o=!1},d(e){Y(n,e)}}}function pt(t){return{c:e,m:e,p:e,d:e}}function mt(t){let n;return{c(){n=h("p"),n.textContent=`Successfully connected to ${ye}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function gt(t){let n;return{c(){n=h("p"),n.textContent=`Connecting to ${ye}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function $t(e){let t,n,o,i;return t=new dt({}),o=new Ge({props:{problem:e[0]}}),o.$on("progress",e[4]),o.$on("solved",e[5]),{c(){V(t.$$.fragment),n=m(),V(o.$$.fragment)},m(e,r){J(t,e,r),u(e,n,r),J(o,e,r),i=!0},p(e,t){const n={};1&t&&(n.problem=e[0]),o.$set(n)},i(e){i||(U(t.$$.fragment,e),U(o.$$.fragment,e),i=!0)},o(e){L(t.$$.fragment,e),L(o.$$.fragment,e),i=!1},d(e){Y(t,e),e&&d(n),Y(o,e)}}}function vt(t){let n,o,i,r,s,l,c,f,p,g;const y=[ht,ft],b=[];r=be?0:1,s=b[r]=y[r](t),c=new tt({});let x=t[0]&&$t(t),w=be&&function(t){let n,o,i;return{c(){n=h("button"),n.textContent="New Problem",v(n,"class","svelte-3fadq2")},m(e,r){u(e,n,r),o||(i=$(n,"click",t[1]),o=!0)},p:e,d(e){e&&d(n),o=!1,i()}}}(t);return{c(){n=h("canvas"),o=m(),i=h("main"),s.c(),l=m(),V(c.$$.fragment),f=m(),x&&x.c(),p=m(),w&&w.c(),v(n,"id","confetti"),v(n,"class","svelte-3fadq2"),v(i,"class","svelte-3fadq2")},m(e,t){u(e,n,t),u(e,o,t),u(e,i,t),b[r].m(i,null),a(i,l),J(c,i,null),a(i,f),x&&x.m(i,null),a(i,p),w&&w.m(i,null),g=!0},p(e,[t]){s.p(e,t),e[0]?x?(x.p(e,t),1&t&&U(x,1)):(x=$t(e),x.c(),U(x,1),x.m(i,p)):x&&(I(),L(x,1,1,(()=>{x=null})),F()),be&&w.p(e,t)},i(e){g||(U(s),U(c.$$.fragment,e),U(x),g=!0)},o(e){L(s),L(c.$$.fragment,e),L(x),g=!1},d(e){e&&d(n),e&&d(o),e&&d(i),b[r].d(),Y(c),x&&x.d(),w&&w.d()}}}function yt(e,t,n){let o,i,r;c(e,ae,(e=>n(2,o=e))),c(e,oe,(e=>n(3,i=e))),c(e,re,(e=>n(0,r=e)));const s=(()=>{let e=0;const t=fetch(`./quotes/${Math.floor(8*Math.random())}.json`).then((e=>e.json())).then(Z);return async()=>{const n=await t,o=n[e++%n.length];return{author:o.quoteAuthor,text:Q(o.quoteText)}}})();return e.$$.update=()=>{e.$$.dirty,4&e.$$.dirty&&o&&Fe.addConfetti()},[r,()=>{s().then((e=>re.set((e=>{const t=e.text.toUpperCase(),n=G(),o=[...t].map((e=>n[H.indexOf(e)]??e)).join("");return{...e,plaintext:t,ciphertext:o}})(e))))},o,i,e=>ce.set(e.detail.progress),()=>ae.set(!0)]}const bt=new class extends X{constructor(e){super(),K(this,e,yt,vt,r,{})}}({target:document.body,props:{name:"world"}});return"undefined"!=typeof module&&module.hot&&("undefined"!=typeof module&&module.hot.dispose((()=>{bt.$destroy()})),"undefined"!=typeof module&&module.hot.accept()),bt}();
//# sourceMappingURL=bundle.js.map
