var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(e){let t;return s(e,(e=>t=e))(),t}function l(e,t,n){e.$$.on_destroy.push(s(t,n))}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function g(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function b(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){e.classList[n?"add":"remove"](t)}let w;function C(e){w=e}function k(){if(!w)throw new Error("Function called outside component initialization");return w}function P(){const e=k();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,i)}))}}}const S=[],j=[],A=[],M=[],_=Promise.resolve();let q=!1;function E(e){A.push(e)}const R=new Set;let O=0;function I(){const e=w;do{for(;O<S.length;){const e=S[O];O++,C(e),T(e.$$)}for(C(null),S.length=0,O=0;j.length;)j.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];R.has(t)||(R.add(t),t())}A.length=0}while(S.length);for(;M.length;)M.pop()();q=!1,R.clear(),C(e)}function T(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const N=new Set;let B;function z(){B={r:0,c:[],p:B}}function D(){B.r||o(B.c),B=B.p}function F(e,t){e&&e.i&&(N.delete(e),e.i(t))}function U(e,t,n,o){if(e&&e.o){if(N.has(e))return;N.add(e),B.c.push((()=>{N.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function L(e){e&&e.c()}function V(e,n,r,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(n,r),s||E((()=>{const n=l.map(t).filter(i);c?c.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(E)}function J(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(e,t){-1===e.$$.dirty[0]&&(S.push(e),q||(q=!0,_.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,i,r,s,a,l,c,u=[-1]){const f=w;C(t);const h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||f.$$.root};c&&c(h.root);let p=!1;if(h.ctx=r?r(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&Y(t,e)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();i.intro&&F(t.$$.fragment),V(t,i.target,i.anchor,i.customElement),I()}C(f)}class K{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ",H=()=>{const e=[...Array(26).keys()].map((e=>[Math.random(),e])).sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return e.some(((e,t)=>e==t))?H():e.map((e=>X[e]))},Z=e=>e.replace(/[^\x00-\x7F]+/g,""),G=[];function Q(t,n=e){let o;const i=new Set;function s(e){if(r(t,e)&&(t=e,o)){const e=!G.length;for(const e of i)e[1](),G.push(e,t);if(e){for(let e=0;e<G.length;e+=2)G[e][0](G[e+1]);G.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,a=e){const l=[r,a];return i.add(l),1===i.size&&(o=n(s)||e),r(t),()=>{i.delete(l),0===i.size&&(o(),o=null)}}}}function ee(t,n,r){const a=!Array.isArray(t),l=a?[t]:t,c=n.length<2;return u=t=>{let r=!1;const u=[];let d=0,f=e;const h=()=>{if(d)return;f();const o=n(a?u[0]:u,t);c?t(o):f=i(o)?o:e},p=l.map(((e,t)=>s(e,(e=>{u[t]=e,d&=~(1<<t),r&&h()}),(()=>{d|=1<<t}))));return r=!0,h(),function(){o(p),f()}},{subscribe:Q(r,u).subscribe};var u}const te=Q([{id:"",name:"",progress:null,solved:!1,conn:{}}].slice(1)),ne=Q(""),oe=Q(null),ie=Q(`person-${parseInt(1e4*Math.random())}`),re=Q(null),se=Q(null),ae=Q(!1),le=new Map,ce=ee([ne,ie,se,ae],(([e,t,n,o])=>({id:e,name:t,progress:n,solved:o}))),ue=ee(oe,(()=>Date.now())),de=ee([te,ue],(([e,t])=>new Map(e.map((e=>[e.id,e.solved?a(de).get(e.id):Date.now()-t]))))),fe=0,he=1,pe=2,me=3,ge=new URLSearchParams(location.search).get("game"),$e=null==ge,ve=e=>`${Math.floor(e/6e4)}:${Math.floor(e%6e4/1e3)}`,ye=new window.Peer,be=[(e,t)=>{te.update((n=>[...n,{id:e,name:t.name,progress:null,solved:!1}]))},(e,t)=>{oe.set(t.problem)},(e,t)=>{$e&&te.update((n=>n.map((n=>n.id!==e?n:{...n,name:t.name,progress:t.progress,solved:t.solved}))))},(e,t)=>{if($e)return;const n=a(ne);te.set(t.users.filter((e=>e.id!==n)))}],xe=e=>new Promise((t=>{e.on("open",(()=>{var n;e.peer==ge&&re.set(e),le.set(e.peer,e),e.on("data",(n=e.peer,e=>{be[e.type]&&be[e.type](n,e)})),e.on("close",(e=>()=>{te.update((t=>t.filter((t=>t.id!==e)))),le.delete(e)})(e.peer)),setTimeout((()=>{(e=>{e?.send({type:fe,name:a(ie)})})(e)}),100),t(e)}))})),we=e=>le.forEach((t=>t.send(e)));ye.on("open",ne.set),ye.on("connection",xe);const Ce=[ce.subscribe((e=>{$e?we({type:me,users:[...a(te).map((e=>({...e,conn:null}))),e]}):a(re)?.send({type:pe,name:e.name,progress:e.progress,solved:e.solved})})),oe.subscribe((e=>{$e&&we({type:he,problem:e})}))];function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Se(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}function je(e){return+e.replace(/px/,"")}function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.random()*(t-e)+e;return Math.floor(o*Math.pow(10,n))/Math.pow(10,n)}function Me(e){return e[Ae(0,e.length)]}window.$cryptoduel$subscriptions&&window.$cryptoduel$subscriptions.forEach((e=>e())),window.$cryptoduel$subscriptions=Ce;var _e=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function qe(e){return Math.log(e)/Math.log(1920)}var Ee=function(){function e(t){ke(this,e);var n=t.initialPosition,o=t.direction,i=t.confettiRadius,r=t.confettiColors,s=t.emojis,a=t.emojiSize,l=t.canvasWidth,c=Ae(.9,1.7,3)*qe(l);this.confettiSpeed={x:c,y:c},this.finalConfettiSpeedX=Ae(.2,.6,3),this.rotationSpeed=s.length?.01:Ae(.03,.07,3)*qe(l),this.dragForceCoefficient=Ae(5e-4,9e-4,6),this.radius={x:i,y:i},this.initialRadius=i,this.rotationAngle="left"===o?Ae(0,.2,3):Ae(-.2,0,3),this.emojiSize=a,this.emojiRotationAngle=Ae(0,2*Math.PI),this.radiusYUpdateDirection="down";var u="left"===o?Ae(82,15)*Math.PI/180:Ae(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(u)),this.absSin=Math.abs(Math.sin(u));var d=Ae(-150,0),f={x:n.x+("left"===o?-d:d)*this.absCos,y:n.y-d*this.absSin};this.currentPosition=Object.assign({},f),this.initialPosition=Object.assign({},f),this.color=s.length?null:Me(r),this.emoji=s.length?Me(s):null,this.createdAt=(new Date).getTime(),this.direction=o}return Se(e,[{key:"draw",value:function(e){var t=this.currentPosition,n=this.radius,o=this.color,i=this.emoji,r=this.rotationAngle,s=this.emojiRotationAngle,a=this.emojiSize,l=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(t.x*l,t.y*l,n.x*l,n.y*l,r,0,2*Math.PI),e.fill()):i&&(e.font="".concat(a,"px serif"),e.save(),e.translate(l*t.x,l*t.y),e.rotate(s),e.textAlign="center",e.fillText(i,0,0),e.restore())}},{key:"updatePosition",value:function(e,t){var n=this.confettiSpeed,o=this.dragForceCoefficient,i=this.finalConfettiSpeedX,r=this.radiusYUpdateDirection,s=this.rotationSpeed,a=this.createdAt,l=this.direction,c=t-a;n.x>i&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=n.x*("left"===l?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*c+.00125*Math.pow(c,2)/2,this.rotationSpeed-=this.emoji?1e-4:1e-5*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI):"down"===r?(this.radius.y-=e*s,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*s,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+100}}]),e}();function Re(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function Oe(e){var t=e.confettiRadius,n=void 0===t?6:t,o=e.confettiNumber,i=void 0===o?e.confettiesNumber||(e.emojis?40:250):o,r=e.confettiColors,s=void 0===r?_e:r,a=e.emojis,l=void 0===a?e.emojies||[]:a,c=e.emojiSize,u=void 0===c?80:c;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:i,confettiColors:s,emojis:l,emojiSize:u}}var Ie=function(){function e(t){var n=this;ke(this,e),this.canvasContext=t,this.shapes=[],this.promise=new Promise((function(e){return n.resolvePromise=e}))}return Se(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return!this.shapes.length&&(null===(e=this.resolvePromise)||void 0===e||e.call(this),!0)}},{key:"processShapes",value:function(e,t,n){var o=this,i=e.timeDelta,r=e.currentTime;this.shapes=this.shapes.filter((function(e){return e.updatePosition(i,r),e.draw(o.canvasContext),!n||e.getIsVisibleOnCanvas(t)}))}}]),e}(),Te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke(this,e),this.activeConfettiBatches=[],this.canvas=t.canvas||Re(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return Se(e,[{key:"loop",value:function(){var e,t,n,o,i;this.requestAnimationFrameRequested=!1,e=this.canvas,t=window.devicePixelRatio,n=getComputedStyle(e),o=je(n.getPropertyValue("width")),i=je(n.getPropertyValue("height")),e.setAttribute("width",(o*t).toString()),e.setAttribute("height",(i*t).toString());var r=(new Date).getTime(),s=r-this.lastUpdated,a=this.canvas.offsetHeight,l=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter((function(e){return e.processShapes({timeDelta:s,currentTime:r},a,l),!l||!e.complete()})),this.iterationIndex++,this.queueAnimationFrameIfNeeded(r)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Oe(e),n=t.confettiRadius,o=t.confettiNumber,i=t.confettiColors,r=t.emojis,s=t.emojiSize,a=this.canvas.getBoundingClientRect(),l=a.width,c=a.height,u=5*c/7,d={x:0,y:u},f={x:l,y:u},h=new Ie(this.canvasContext),p=0;p<o/2;p++){var m=new Ee({initialPosition:d,direction:"right",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:l}),g=new Ee({initialPosition:f,direction:"left",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:l});h.addShapes(m,g)}return this.activeConfettiBatches.push(h),this.queueAnimationFrameIfNeeded(),h.getBatchCompletePromise()}}]),e}();let Ne;setTimeout((()=>{Ne=new Te({canvas:document.querySelector("#confetti")})}),10),window.$cryptoduel$confetti=Ne;function Be(e,t,n){const o=e.slice();o[7]=t[n],o[9]=n;const i=o[2][o[9]];return o[1]=i,o}function ze(e){let t,n,o,i,r,s,a,l,f,y,b=e[7]+"",w=e[1]+"";return{c(){t=h("div"),n=h("div"),o=p(b),i=m(),r=h("div"),s=h("pre"),a=p(w),l=m(),$(n,"class","cipher-letter svelte-1x2ot2m"),$(r,"class","decrypted-letter svelte-1x2ot2m"),$(r,"tabindex","0"),x(r,"non-alphabetic",null===e[1]),$(t,"class","plain-encrypt-pair svelte-1x2ot2m")},m(d,h){u(d,t,h),c(t,n),c(n,o),c(t,i),c(t,r),c(r,s),c(s,a),c(t,l),f||(y=g(r,"keydown",e[3](e[9])),f=!0)},p(t,n){e=t,1&n&&b!==(b=e[7]+"")&&v(o,b),4&n&&w!==(w=e[1]+"")&&v(a,w),4&n&&x(r,"non-alphabetic",null===e[1])},d(e){e&&d(t),f=!1,y()}}}function De(t){let n,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=ze(Be(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();$(n,"class","word svelte-1x2ot2m")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(13&t){let r;for(o=e[0],r=0;r<o.length;r+=1){const s=Be(e,o,r);i[r]?i[r].p(s,t):(i[r]=ze(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function Fe(e,t,n){let o,{word:i=""}=t,{replacement:r=Array(26).fill("")}=t,{disabled:s=!1}=t;const a=P();return e.$$set=e=>{"word"in e&&n(0,i=e.word),"replacement"in e&&n(1,r=e.replacement),"disabled"in e&&n(4,s=e.disabled)},e.$$.update=()=>{3&e.$$.dirty&&n(2,o=((e,t)=>[...e].map((e=>{const n=X.indexOf(e);return-1===n?null:t[n]})))(i,r))},[i,r,o,e=>t=>{s||a("replace",{from:i[e],to:t.key.toUpperCase()})},s]}class Ue extends K{constructor(e){super(),W(this,e,Fe,De,r,{word:0,replacement:1,disabled:4})}}function Le(e,t,n){const o=e.slice();return o[9]=t[n],o}function Ve(e){let t,n;return t=new Ue({props:{word:e[9],replacement:e[1],disabled:e[2]}}),t.$on("replace",e[5]),{c(){L(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.word=e[9]),2&n&&(o.replacement=e[1]),4&n&&(o.disabled=e[2]),t.$set(o)},i(e){n||(F(t.$$.fragment,e),n=!0)},o(e){U(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Je(e){let t,n,o,i,r,s,a=e[0].author+"",l=e[3],g=[];for(let t=0;t<l.length;t+=1)g[t]=Ve(Le(e,l,t));const y=e=>U(g[e],1,1,(()=>{g[e]=null}));return{c(){t=h("p"),n=p("Solve this quote by "),o=p(a),i=m(),r=h("div");for(let e=0;e<g.length;e+=1)g[e].c();$(t,"class","svelte-xqyi96"),$(r,"class","cryptogram svelte-xqyi96"),x(r,"solved",e[2])},m(e,a){u(e,t,a),c(t,n),c(t,o),u(e,i,a),u(e,r,a);for(let e=0;e<g.length;e+=1)g[e].m(r,null);s=!0},p(e,[t]){if((!s||1&t)&&a!==(a=e[0].author+"")&&v(o,a),30&t){let n;for(l=e[3],n=0;n<l.length;n+=1){const o=Le(e,l,n);g[n]?(g[n].p(o,t),F(g[n],1)):(g[n]=Ve(o),g[n].c(),F(g[n],1),g[n].m(r,null))}for(z(),n=l.length;n<g.length;n+=1)y(n);D()}4&t&&x(r,"solved",e[2])},i(e){if(!s){for(let e=0;e<l.length;e+=1)F(g[e]);s=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)U(g[e]);s=!1},d(e){e&&d(t),e&&d(i),e&&d(r),f(g,e)}}}function Ye(e,t,n){let o,i,{problem:r=null}=t;const s=P();let a=Array(26).fill("");const l=({from:e,to:t})=>{if((1!=t.length||!/[a-zA-Z]/.test(t))&&"BACKSPACE"!==t)return;const o=[...a];o[X.indexOf(e)]="BACKSPACE"==t?"":t,n(1,a=o)},c=(e,t)=>[...t].map((t=>X.includes(t)&&""!==e[X.indexOf(t)]));return e.$$set=e=>{"problem"in e&&n(0,r=e.problem)},e.$$.update=()=>{1&e.$$.dirty&&n(1,a=Array(26).fill("")),1&e.$$.dirty&&n(3,o=(e=>[...e.split(/\s+/g)])(r.ciphertext)),3&e.$$.dirty&&n(2,i=((e,t)=>!!t&&[...t.ciphertext].every(((n,o)=>!X.includes(n)||t.plaintext[o]===e[X.indexOf(n)])))(a,r)),4&e.$$.dirty&&i&&s("solved"),3&e.$$.dirty&&s("progress",{progress:c(a,r.ciphertext)}),e.$$.dirty},[r,a,i,o,l,e=>l(e.detail)]}class We extends K{constructor(e){super(),W(this,e,Ye,Je,r,{problem:0})}}function Ke(t){let n,o,i,r,s,a,l;return{c(){n=h("div"),o=h("label"),o.textContent="Username",i=m(),r=h("input"),$(o,"for","username"),$(r,"type","text"),$(r,"id","username"),$(r,"name","username"),r.disabled=s=null!=t[2],$(n,"class","name-chooser svelte-1mwrz3m")},m(e,s){u(e,n,s),c(n,o),c(n,i),c(n,r),y(r,t[3]),a||(l=g(r,"input",t[4]),a=!0)},p(e,[t]){4&t&&s!==(s=null!=e[2])&&(r.disabled=s),8&t&&r.value!==e[3]&&y(r,e[3])},i:e,o:e,d(e){e&&d(n),a=!1,l()}}}function Xe(t,n,o){let i,r,a=e,l=()=>(a(),a=s(d,(e=>o(2,i=e))),d),c=e,u=()=>(c(),c=s(f,(e=>o(3,r=e))),f);t.$$.on_destroy.push((()=>a())),t.$$.on_destroy.push((()=>c()));let{gameProblem:d=oe}=n;l();let{name:f=ie}=n;return u(),t.$$set=e=>{"gameProblem"in e&&l(o(0,d=e.gameProblem)),"name"in e&&u(o(1,f=e.name))},[d,f,i,r,function(){r=this.value,f.set(r)}]}class He extends K{constructor(e){super(),W(this,e,Xe,Ke,r,{gameProblem:0,name:1})}}function Ze(t){let n,o,i,r,s,a,l,f,y=t[1]?"Join Link (copied)":"Copy Join Link";return{c(){n=h("div"),o=h("button"),i=p(y),r=m(),s=h("a"),a=p(t[2]),$(o,"class","join-link svelte-vczin0"),$(s,"href",t[2]),$(n,"class","join-links svelte-vczin0")},m(e,d){u(e,n,d),c(n,o),c(o,i),c(n,r),c(n,s),c(s,a),l||(f=g(o,"click",t[3]),l=!0)},p(e,[t]){2&t&&y!==(y=e[1]?"Join Link (copied)":"Copy Join Link")&&v(i,y),4&t&&v(a,e[2]),4&t&&$(s,"href",e[2])},i:e,o:e,d(e){e&&d(n),l=!1,f()}}}function Ge(t,n,o){let i,r,a=e,l=()=>(a(),a=s(c,(e=>o(4,r=e))),c);t.$$.on_destroy.push((()=>a()));let{id:c=ne}=n;l();let u=!1;return t.$$set=e=>{"id"in e&&l(o(0,c=e.id))},t.$$.update=()=>{16&t.$$.dirty&&o(2,i=`${location.href}?game=${encodeURIComponent(r)}`)},[c,u,i,()=>{navigator.clipboard.writeText(i),o(1,u=!0)},r]}class Qe extends K{constructor(e){super(),W(this,e,Ge,Ze,r,{id:0})}}function et(e,t,n){const o=e.slice();return o[7]=t[n],o}function tt(e,t,n){const o=e.slice();return o[10]=t[n],o}function nt(e){let t;return{c(){t=h("div"),$(t,"class","progress-item svelte-yaogca"),x(t,"has-done",e[10])},m(e,n){u(e,t,n)},p(e,n){24&n&&x(t,"has-done",e[10])},d(e){e&&d(t)}}}function ot(e){let t,n,o,i,r,s,a,l=e[7].name+"",g=e[7].progress??e[3],y=[];for(let t=0;t<g.length;t+=1)y[t]=nt(tt(e,g,t));return{c(){t=h("div"),n=h("p"),o=p(l),i=p(":"),r=m(),s=h("div");for(let e=0;e<y.length;e+=1)y[e].c();a=m(),$(s,"class","opponent-progress svelte-yaogca"),$(t,"class","user-container svelte-yaogca"),b(t,"--desc","'SOLVED ("+ve(e[5].get(e[7].id))+")'"),x(t,"solved",e[7].solved)},m(e,l){u(e,t,l),c(t,n),c(n,o),c(n,i),c(t,r),c(t,s);for(let e=0;e<y.length;e+=1)y[e].m(s,null);c(t,a)},p(e,n){if(16&n&&l!==(l=e[7].name+"")&&v(o,l),24&n){let t;for(g=e[7].progress??e[3],t=0;t<g.length;t+=1){const o=tt(e,g,t);y[t]?y[t].p(o,n):(y[t]=nt(o),y[t].c(),y[t].m(s,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=g.length}48&n&&b(t,"--desc","'SOLVED ("+ve(e[5].get(e[7].id))+")'"),16&n&&x(t,"solved",e[7].solved)},d(e){e&&d(t),f(y,e)}}}function it(t){let n,o=t[4],i=[];for(let e=0;e<o.length;e+=1)i[e]=ot(et(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();$(n,"class","opponent-progress-container svelte-yaogca")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(56&t){let r;for(o=e[4],r=0;r<o.length;r+=1){const s=et(e,o,r);i[r]?i[r].p(s,t):(i[r]=ot(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function rt(t,n,o){let i,r,a,l,c=e,u=()=>(c(),c=s(g,(e=>o(6,r=e))),g),d=e,f=()=>(d(),d=s(m,(e=>o(4,a=e))),m),h=e,p=()=>(h(),h=s($,(e=>o(5,l=e))),$);t.$$.on_destroy.push((()=>c())),t.$$.on_destroy.push((()=>d())),t.$$.on_destroy.push((()=>h()));let{users:m=te}=n;f();let{gameProblem:g=oe}=n;u();let{timeTakenByOpponents:$=de}=n;return p(),t.$$set=e=>{"users"in e&&f(o(0,m=e.users)),"gameProblem"in e&&u(o(1,g=e.gameProblem)),"timeTakenByOpponents"in e&&p(o(2,$=e.timeTakenByOpponents))},t.$$.update=()=>{64&t.$$.dirty&&o(3,i=null===r?[]:[...r.ciphertext].map((e=>!1)))},[m,g,$,i,a,l,r]}class st extends K{constructor(e){super(),W(this,e,rt,it,r,{users:0,gameProblem:1,timeTakenByOpponents:2})}}function at(t){let n,o={ctx:t,current:null,token:null,hasCatch:!1,pending:dt,then:ut,catch:ct,value:7};var i;return function(e,t){const n=t.token={};function o(e,o,i,r){if(t.token!==n)return;t.resolved=r;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(z(),U(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),D())})):t.block.d(1),a.c(),F(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[o]=a),l&&I()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=k();if(e.then((e=>{C(n),o(t.then,1,t.value,e),C(null)}),(e=>{if(C(n),o(t.catch,2,t.error,e),C(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var i}((i=ge,new Promise((e=>{const t=ne.subscribe((n=>{if(""===n)return;const o=ye.connect(i);t(),xe(o).then(e)}))}))),o),{c(){n=p(""),o.block.c()},m(e,t){u(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,n){!function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(o,t=e,n)},i:e,o:e,d(e){e&&d(n),o.block.d(e),o.token=null,o=null}}}function lt(t){let n,o;return n=new Qe({}),{c(){L(n.$$.fragment)},m(e,t){V(n,e,t),o=!0},p:e,i(e){o||(F(n.$$.fragment,e),o=!0)},o(e){U(n.$$.fragment,e),o=!1},d(e){J(n,e)}}}function ct(t){return{c:e,m:e,p:e,d:e}}function ut(t){let n;return{c(){n=h("p"),n.textContent=`Successfully connected to ${ge}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function dt(t){let n;return{c(){n=h("p"),n.textContent=`Connecting to ${ge}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function ft(e){let t,n,o,i;return t=new st({}),o=new We({props:{problem:e[0]}}),o.$on("progress",e[4]),o.$on("solved",e[5]),{c(){L(t.$$.fragment),n=m(),L(o.$$.fragment)},m(e,r){V(t,e,r),u(e,n,r),V(o,e,r),i=!0},p(e,t){const n={};1&t&&(n.problem=e[0]),o.$set(n)},i(e){i||(F(t.$$.fragment,e),F(o.$$.fragment,e),i=!0)},o(e){U(t.$$.fragment,e),U(o.$$.fragment,e),i=!1},d(e){J(t,e),e&&d(n),J(o,e)}}}function ht(t){let n,o,i,r,s,a,l,f,p,v;const y=[lt,at],b=[];r=$e?0:1,s=b[r]=y[r](t),l=new He({});let x=t[0]&&ft(t),w=$e&&function(t){let n,o,i;return{c(){n=h("button"),n.textContent="New Problem",$(n,"class","svelte-3fadq2")},m(e,r){u(e,n,r),o||(i=g(n,"click",t[1]),o=!0)},p:e,d(e){e&&d(n),o=!1,i()}}}(t);return{c(){n=h("canvas"),o=m(),i=h("main"),s.c(),a=m(),L(l.$$.fragment),f=m(),x&&x.c(),p=m(),w&&w.c(),$(n,"id","confetti"),$(n,"class","svelte-3fadq2"),$(i,"class","svelte-3fadq2")},m(e,t){u(e,n,t),u(e,o,t),u(e,i,t),b[r].m(i,null),c(i,a),V(l,i,null),c(i,f),x&&x.m(i,null),c(i,p),w&&w.m(i,null),v=!0},p(e,[t]){s.p(e,t),e[0]?x?(x.p(e,t),1&t&&F(x,1)):(x=ft(e),x.c(),F(x,1),x.m(i,p)):x&&(z(),U(x,1,1,(()=>{x=null})),D()),$e&&w.p(e,t)},i(e){v||(F(s),F(l.$$.fragment,e),F(x),v=!0)},o(e){U(s),U(l.$$.fragment,e),U(x),v=!1},d(e){e&&d(n),e&&d(o),e&&d(i),b[r].d(),J(l),x&&x.d(),w&&w.d()}}}function pt(e,t,n){let o,i,r;l(e,ae,(e=>n(2,o=e))),l(e,te,(e=>n(3,i=e))),l(e,oe,(e=>n(0,r=e)));const s=(()=>{const e=fetch(`./quotes/${parseInt(8*Math.random())}.json`).then((e=>e.json()));return async()=>{const t=await e,n=t[parseInt(Math.random()*t.length)];return{author:n.quoteAuthor,text:Z(n.quoteText)}}})();return e.$$.update=()=>{e.$$.dirty,4&e.$$.dirty&&o&&Ne.addConfetti()},[r,()=>{s().then((e=>oe.set((e=>{const t=e.text.toUpperCase(),n=H(),o=[...t].map((e=>n[X.indexOf(e)]??e)).join("");return{...e,plaintext:t,ciphertext:o}})(e))))},o,i,e=>se.set(e.detail.progress),()=>ae.set(!0)]}const mt=new class extends K{constructor(e){super(),W(this,e,pt,ht,r,{})}}({target:document.body,props:{name:"world"}});return"undefined"!=typeof module&&module.hot&&("undefined"!=typeof module&&module.hot.dispose((()=>{mt.$destroy()})),"undefined"!=typeof module&&module.hot.accept()),mt}();
//# sourceMappingURL=bundle.js.map
