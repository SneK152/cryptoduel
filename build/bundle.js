var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(e){let t;return s(e,(e=>t=e))(),t}function a(e,t,n){e.$$.on_destroy.push(s(t,n))}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function g(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function b(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e,t,n){e.classList[n?"add":"remove"](t)}let w;function C(e){w=e}function P(){if(!w)throw new Error("Function called outside component initialization");return w}function k(){const e=P();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,i)}))}}}const S=[],A=[],E=[],T=[],_=Promise.resolve();let j=!1;function R(e){E.push(e)}const M=new Set;let I=0;function N(){const e=w;do{for(;I<S.length;){const e=S[I];I++,C(e),q(e.$$)}for(C(null),S.length=0,I=0;A.length;)A.pop()();for(let e=0;e<E.length;e+=1){const t=E[e];M.has(t)||(M.add(t),t())}E.length=0}while(S.length);for(;T.length;)T.pop()();j=!1,M.clear(),C(e)}function q(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const O=new Set;let D;function B(){D={r:0,c:[],p:D}}function U(){D.r||o(D.c),D=D.p}function z(e,t){e&&e.i&&(O.delete(e),e.i(t))}function L(e,t,n,o){if(e&&e.o){if(O.has(e))return;O.add(e),D.c.push((()=>{O.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function F(e){e&&e.c()}function V(e,n,r,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=e.$$;l&&l.m(n,r),s||R((()=>{const n=a.map(t).filter(i);c?c.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(R)}function W(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(S.push(e),j||(j=!0,_.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(t,i,r,s,l,a,c,u=[-1]){const f=w;C(t);const h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||f.$$.root};c&&c(h.root);let p=!1;if(h.ctx=r?r(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&l(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&J(t,e)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();i.intro&&z(t.$$.fragment),V(t,i.target,i.anchor,i.customElement),N()}C(f)}class K{$destroy(){W(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ",H=e=>e.map((e=>[Math.random(),e])).sort(((e,t)=>e[0]-t[0])).map((e=>e[1])),Z=()=>{const e=H([...Array(26).keys()]);return e.some(((e,t)=>e==t))?Z():e.map((e=>X[e]))},G=e=>e.replace(/[^\x00-\x7F]+/g,""),Q=[];function ee(t,n=e){let o;const i=new Set;function s(e){if(r(t,e)&&(t=e,o)){const e=!Q.length;for(const e of i)e[1](),Q.push(e,t);if(e){for(let e=0;e<Q.length;e+=2)Q[e][0](Q[e+1]);Q.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,l=e){const a=[r,l];return i.add(a),1===i.size&&(o=n(s)||e),r(t),()=>{i.delete(a),0===i.size&&(o(),o=null)}}}}function te(t,n,r){const l=!Array.isArray(t),a=l?[t]:t,c=n.length<2;return u=t=>{let r=!1;const u=[];let d=0,f=e;const h=()=>{if(d)return;f();const o=n(l?u[0]:u,t);c?t(o):f=i(o)?o:e},p=a.map(((e,t)=>s(e,(e=>{u[t]=e,d&=~(1<<t),r&&h()}),(()=>{d|=1<<t}))));return r=!0,h(),function(){o(p),f()}},{subscribe:ee(r,u).subscribe};var u}const ne=ee([{id:"",name:"",progress:null,solved:!1,conn:{}}].slice(1)),oe=ee(""),ie=ee(null),re=ee(`person-${parseInt(1e4*Math.random())}`),se=ee(null),le=ee(null),ae=ee(!1),ce=new Map,ue=te([oe,re,le,ae],(([e,t,n,o])=>({id:e,name:t,progress:n,solved:o}))),de=te(ie,(()=>Date.now())),fe=te([ne,de],(([e,t])=>new Map(e.map((e=>[e.id,e.solved?l(fe).get(e.id):Date.now()-t]))))),he={Peer:window.Peer},pe={INIT_STATE:0,NEW_PROBLEM:1,UPDATE_SERVER_STATE:2,UPDATE_CLIENT_STATE:3},me=new URLSearchParams(location.search).get("game"),ge=null==me,$e=e=>null===e?[]:[...e.ciphertext].map((e=>!1)),ve=e=>`${Math.floor(e)}`.padStart(2,"0"),ye=e=>{const t=ve(e/6e4/60),n=ve(e/6e4%60),o=ve(e%6e4/1e3);return("00"!=t?`${t}:${n}:${o}`:`${n}:${o}`).replace(/^0+/g,"")},be=new he.Peer,xe=[(e,t)=>{ne.update((n=>[...n,{id:e,name:t.name,progress:null,solved:!1}]))},(e,t)=>{ie.set(t.problem)},(e,t)=>{ge&&ne.update((n=>n.map((n=>n.id!==e?n:{...n,name:t.name,progress:t.progress,solved:t.solved}))))},(e,t)=>{if(ge)return;const n=l(oe);ne.set(t.users.filter((e=>e.id!==n)))}],we=e=>new Promise((t=>{e.on("open",(()=>{var n;e.peer==me&&se.set(e),ce.set(e.peer,e),e.on("data",(n=e.peer,e=>{xe[e.type]&&xe[e.type](n,e)})),e.on("close",(e=>()=>{ne.update((t=>t.filter((t=>t.id!==e)))),ce.delete(e)})(e.peer)),setTimeout((()=>{(e=>{e?.send({type:pe.INIT_STATE,name:l(re)})})(e)}),100),t(e)}))})),Ce=e=>ce.forEach((t=>t.send(e)));be.on("open",oe.set),be.on("connection",we);const Pe=[ue.subscribe((e=>{ge?Ce({type:pe.UPDATE_CLIENT_STATE,users:[...l(ne).map((e=>({...e,conn:null}))),e]}):l(se)?.send({type:pe.UPDATE_SERVER_STATE,name:e.name,progress:e.progress,solved:e.solved})})),ie.subscribe((e=>{null!==e&&ge&&[{type:pe.UPDATE_CLIENT_STATE,users:$e(e)},{type:pe.NEW_PROBLEM,problem:e}].forEach(Ce)}))];function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ae(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Ee(e){return+e.replace(/px/,"")}function Te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.random()*(t-e)+e;return Math.floor(o*Math.pow(10,n))/Math.pow(10,n)}function _e(e){return e[Te(0,e.length)]}window.$cryptoduel$subscriptions&&window.$cryptoduel$subscriptions.forEach((e=>e())),window.$cryptoduel$subscriptions=Pe;var je=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function Re(e){return Math.log(e)/Math.log(1920)}var Me=function(){function e(t){ke(this,e);var n=t.initialPosition,o=t.direction,i=t.confettiRadius,r=t.confettiColors,s=t.emojis,l=t.emojiSize,a=t.canvasWidth,c=Te(.9,1.7,3)*Re(a);this.confettiSpeed={x:c,y:c},this.finalConfettiSpeedX=Te(.2,.6,3),this.rotationSpeed=s.length?.01:Te(.03,.07,3)*Re(a),this.dragForceCoefficient=Te(5e-4,9e-4,6),this.radius={x:i,y:i},this.initialRadius=i,this.rotationAngle="left"===o?Te(0,.2,3):Te(-.2,0,3),this.emojiSize=l,this.emojiRotationAngle=Te(0,2*Math.PI),this.radiusYUpdateDirection="down";var u="left"===o?Te(82,15)*Math.PI/180:Te(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(u)),this.absSin=Math.abs(Math.sin(u));var d=Te(-150,0),f={x:n.x+("left"===o?-d:d)*this.absCos,y:n.y-d*this.absSin};this.currentPosition=Object.assign({},f),this.initialPosition=Object.assign({},f),this.color=s.length?null:_e(r),this.emoji=s.length?_e(s):null,this.createdAt=(new Date).getTime(),this.direction=o}return Ae(e,[{key:"draw",value:function(e){var t=this.currentPosition,n=this.radius,o=this.color,i=this.emoji,r=this.rotationAngle,s=this.emojiRotationAngle,l=this.emojiSize,a=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(t.x*a,t.y*a,n.x*a,n.y*a,r,0,2*Math.PI),e.fill()):i&&(e.font="".concat(l,"px serif"),e.save(),e.translate(a*t.x,a*t.y),e.rotate(s),e.textAlign="center",e.fillText(i,0,0),e.restore())}},{key:"updatePosition",value:function(e,t){var n=this.confettiSpeed,o=this.dragForceCoefficient,i=this.finalConfettiSpeedX,r=this.radiusYUpdateDirection,s=this.rotationSpeed,l=this.createdAt,a=this.direction,c=t-l;n.x>i&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=n.x*("left"===a?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*c+.00125*Math.pow(c,2)/2,this.rotationSpeed-=this.emoji?1e-4:1e-5*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI):"down"===r?(this.radius.y-=e*s,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*s,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+100}}]),e}();function Ie(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function Ne(e){var t=e.confettiRadius,n=void 0===t?6:t,o=e.confettiNumber,i=void 0===o?e.confettiesNumber||(e.emojis?40:250):o,r=e.confettiColors,s=void 0===r?je:r,l=e.emojis,a=void 0===l?e.emojies||[]:l,c=e.emojiSize,u=void 0===c?80:c;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:i,confettiColors:s,emojis:a,emojiSize:u}}var qe=function(){function e(t){var n=this;ke(this,e),this.canvasContext=t,this.shapes=[],this.promise=new Promise((function(e){return n.resolvePromise=e}))}return Ae(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return!this.shapes.length&&(null===(e=this.resolvePromise)||void 0===e||e.call(this),!0)}},{key:"processShapes",value:function(e,t,n){var o=this,i=e.timeDelta,r=e.currentTime;this.shapes=this.shapes.filter((function(e){return e.updatePosition(i,r),e.draw(o.canvasContext),!n||e.getIsVisibleOnCanvas(t)}))}}]),e}(),Oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke(this,e),this.activeConfettiBatches=[],this.canvas=t.canvas||Ie(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return Ae(e,[{key:"loop",value:function(){var e,t,n,o,i;this.requestAnimationFrameRequested=!1,e=this.canvas,t=window.devicePixelRatio,n=getComputedStyle(e),o=Ee(n.getPropertyValue("width")),i=Ee(n.getPropertyValue("height")),e.setAttribute("width",(o*t).toString()),e.setAttribute("height",(i*t).toString());var r=(new Date).getTime(),s=r-this.lastUpdated,l=this.canvas.offsetHeight,a=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter((function(e){return e.processShapes({timeDelta:s,currentTime:r},l,a),!a||!e.complete()})),this.iterationIndex++,this.queueAnimationFrameIfNeeded(r)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ne(e),n=t.confettiRadius,o=t.confettiNumber,i=t.confettiColors,r=t.emojis,s=t.emojiSize,l=this.canvas.getBoundingClientRect(),a=l.width,c=l.height,u=5*c/7,d={x:0,y:u},f={x:a,y:u},h=new qe(this.canvasContext),p=0;p<o/2;p++){var m=new Me({initialPosition:d,direction:"right",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:a}),g=new Me({initialPosition:f,direction:"left",confettiRadius:n,confettiColors:i,confettiNumber:o,emojis:r,emojiSize:s,canvasWidth:a});h.addShapes(m,g)}return this.activeConfettiBatches.push(h),this.queueAnimationFrameIfNeeded(),h.getBatchCompletePromise()}}]),e}();let De;setTimeout((()=>{De=new Oe({canvas:document.querySelector("#confetti")})}),10),window.$cryptoduel$confetti=De;function Be(e,t,n){const o=e.slice();o[7]=t[n],o[9]=n;const i=o[2][o[9]];return o[1]=i,o}function Ue(e){let t,n,o,i,r,s,l,a,f,y,b=e[7]+"",w=e[1]+"";return{c(){t=h("div"),n=h("div"),o=p(b),i=m(),r=h("div"),s=h("pre"),l=p(w),a=m(),$(n,"class","cipher-letter svelte-1x2ot2m"),$(r,"class","decrypted-letter svelte-1x2ot2m"),$(r,"tabindex","0"),x(r,"non-alphabetic",null===e[1]),$(t,"class","plain-encrypt-pair svelte-1x2ot2m")},m(d,h){u(d,t,h),c(t,n),c(n,o),c(t,i),c(t,r),c(r,s),c(s,l),c(t,a),f||(y=g(r,"keydown",e[3](e[9])),f=!0)},p(t,n){e=t,1&n&&b!==(b=e[7]+"")&&v(o,b),4&n&&w!==(w=e[1]+"")&&v(l,w),4&n&&x(r,"non-alphabetic",null===e[1])},d(e){e&&d(t),f=!1,y()}}}function ze(t){let n,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=Ue(Be(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();$(n,"class","word svelte-1x2ot2m")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(13&t){let r;for(o=e[0],r=0;r<o.length;r+=1){const s=Be(e,o,r);i[r]?i[r].p(s,t):(i[r]=Ue(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function Le(e,t,n){let o,{word:i=""}=t,{replacement:r=Array(26).fill("")}=t,{disabled:s=!1}=t;const l=k();return e.$$set=e=>{"word"in e&&n(0,i=e.word),"replacement"in e&&n(1,r=e.replacement),"disabled"in e&&n(4,s=e.disabled)},e.$$.update=()=>{3&e.$$.dirty&&n(2,o=((e,t)=>[...e].map((e=>{const n=X.indexOf(e);return-1===n?null:t[n]})))(i,r))},[i,r,o,e=>t=>{s||l("replace",{from:i[e],to:t.key.toUpperCase()})},s]}class Fe extends K{constructor(e){super(),Y(this,e,Le,ze,r,{word:0,replacement:1,disabled:4})}}function Ve(e,t,n){const o=e.slice();return o[9]=t[n],o}function We(e){let t,n;return t=new Fe({props:{word:e[9],replacement:e[1],disabled:e[2]}}),t.$on("replace",e[5]),{c(){F(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.word=e[9]),2&n&&(o.replacement=e[1]),4&n&&(o.disabled=e[2]),t.$set(o)},i(e){n||(z(t.$$.fragment,e),n=!0)},o(e){L(t.$$.fragment,e),n=!1},d(e){W(t,e)}}}function Je(e){let t,n,o,i,r,s,l=e[0].author+"",a=e[3],g=[];for(let t=0;t<a.length;t+=1)g[t]=We(Ve(e,a,t));const y=e=>L(g[e],1,1,(()=>{g[e]=null}));return{c(){t=h("p"),n=p("Solve this quote by "),o=p(l),i=m(),r=h("div");for(let e=0;e<g.length;e+=1)g[e].c();$(t,"class","svelte-xqyi96"),$(r,"class","cryptogram svelte-xqyi96"),x(r,"solved",e[2])},m(e,l){u(e,t,l),c(t,n),c(t,o),u(e,i,l),u(e,r,l);for(let e=0;e<g.length;e+=1)g[e].m(r,null);s=!0},p(e,[t]){if((!s||1&t)&&l!==(l=e[0].author+"")&&v(o,l),30&t){let n;for(a=e[3],n=0;n<a.length;n+=1){const o=Ve(e,a,n);g[n]?(g[n].p(o,t),z(g[n],1)):(g[n]=We(o),g[n].c(),z(g[n],1),g[n].m(r,null))}for(B(),n=a.length;n<g.length;n+=1)y(n);U()}4&t&&x(r,"solved",e[2])},i(e){if(!s){for(let e=0;e<a.length;e+=1)z(g[e]);s=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)L(g[e]);s=!1},d(e){e&&d(t),e&&d(i),e&&d(r),f(g,e)}}}function Ye(e,t,n){let o,i,{problem:r=null}=t;const s=k();let l=Array(26).fill("");const a=({from:e,to:t})=>{if((1!=t.length||!/[a-zA-Z]/.test(t))&&"BACKSPACE"!==t)return;const o=[...l];o[X.indexOf(e)]="BACKSPACE"==t?"":t,n(1,l=o)},c=(e,t)=>[...t].map((t=>X.includes(t)&&""!==e[X.indexOf(t)]));return e.$$set=e=>{"problem"in e&&n(0,r=e.problem)},e.$$.update=()=>{1&e.$$.dirty&&n(1,l=Array(26).fill("")),1&e.$$.dirty&&n(3,o=(e=>[...e.split(/\s+/g)])(r.ciphertext)),3&e.$$.dirty&&n(2,i=((e,t)=>!!t&&[...t.ciphertext].every(((n,o)=>!X.includes(n)||t.plaintext[o]===e[X.indexOf(n)])))(l,r)),4&e.$$.dirty&&i&&s("solved"),3&e.$$.dirty&&s("progress",{progress:c(l,r.ciphertext)}),e.$$.dirty},[r,l,i,o,a,e=>a(e.detail)]}class Ke extends K{constructor(e){super(),Y(this,e,Ye,Je,r,{problem:0})}}function Xe(t){let n,o,i,r,s,l,a;return{c(){n=h("div"),o=h("label"),o.textContent="Username",i=m(),r=h("input"),$(o,"for","username"),$(r,"type","text"),$(r,"id","username"),$(r,"name","username"),r.disabled=s=null!=t[2],$(n,"class","name-chooser svelte-1mwrz3m")},m(e,s){u(e,n,s),c(n,o),c(n,i),c(n,r),y(r,t[3]),l||(a=g(r,"input",t[4]),l=!0)},p(e,[t]){4&t&&s!==(s=null!=e[2])&&(r.disabled=s),8&t&&r.value!==e[3]&&y(r,e[3])},i:e,o:e,d(e){e&&d(n),l=!1,a()}}}function He(t,n,o){let i,r,l=e,a=()=>(l(),l=s(d,(e=>o(2,i=e))),d),c=e,u=()=>(c(),c=s(f,(e=>o(3,r=e))),f);t.$$.on_destroy.push((()=>l())),t.$$.on_destroy.push((()=>c()));let{gameProblem:d=ie}=n;a();let{name:f=re}=n;return u(),t.$$set=e=>{"gameProblem"in e&&a(o(0,d=e.gameProblem)),"name"in e&&u(o(1,f=e.name))},[d,f,i,r,function(){r=this.value,f.set(r)}]}class Ze extends K{constructor(e){super(),Y(this,e,He,Xe,r,{gameProblem:0,name:1})}}function Ge(t){let n,o,i,r,s,l,a,f,y=t[1]?"Join Link (copied)":"Copy Join Link";return{c(){n=h("div"),o=h("button"),i=p(y),r=m(),s=h("a"),l=p(t[2]),$(o,"class","join-link svelte-vczin0"),$(s,"href",t[2]),$(n,"class","join-links svelte-vczin0")},m(e,d){u(e,n,d),c(n,o),c(o,i),c(n,r),c(n,s),c(s,l),a||(f=g(o,"click",t[3]),a=!0)},p(e,[t]){2&t&&y!==(y=e[1]?"Join Link (copied)":"Copy Join Link")&&v(i,y),4&t&&v(l,e[2]),4&t&&$(s,"href",e[2])},i:e,o:e,d(e){e&&d(n),a=!1,f()}}}function Qe(t,n,o){let i,r,l=e,a=()=>(l(),l=s(c,(e=>o(4,r=e))),c);t.$$.on_destroy.push((()=>l()));let{id:c=oe}=n;a();let u=!1;return t.$$set=e=>{"id"in e&&a(o(0,c=e.id))},t.$$.update=()=>{16&t.$$.dirty&&o(2,i=`${location.href}?game=${encodeURIComponent(r)}`)},[c,u,i,()=>{navigator.clipboard.writeText(i),o(1,u=!0)},r]}class et extends K{constructor(e){super(),Y(this,e,Qe,Ge,r,{id:0})}}function tt(e,t,n){const o=e.slice();return o[7]=t[n],o}function nt(e,t,n){const o=e.slice();return o[10]=t[n],o}function ot(e){let t;return{c(){t=h("div"),$(t,"class","progress-item svelte-yaogca"),x(t,"has-done",e[10])},m(e,n){u(e,t,n)},p(e,n){24&n&&x(t,"has-done",e[10])},d(e){e&&d(t)}}}function it(e){let t,n,o,i,r,s,l,a=e[7].name+"",g=e[7].progress??e[3],y=[];for(let t=0;t<g.length;t+=1)y[t]=ot(nt(e,g,t));return{c(){t=h("div"),n=h("p"),o=p(a),i=p(":"),r=m(),s=h("div");for(let e=0;e<y.length;e+=1)y[e].c();l=m(),$(s,"class","opponent-progress svelte-yaogca"),$(t,"class","user-container svelte-yaogca"),b(t,"--desc","'SOLVED ("+ye(e[5].get(e[7].id))+")'"),x(t,"solved",e[7].solved)},m(e,a){u(e,t,a),c(t,n),c(n,o),c(n,i),c(t,r),c(t,s);for(let e=0;e<y.length;e+=1)y[e].m(s,null);c(t,l)},p(e,n){if(16&n&&a!==(a=e[7].name+"")&&v(o,a),24&n){let t;for(g=e[7].progress??e[3],t=0;t<g.length;t+=1){const o=nt(e,g,t);y[t]?y[t].p(o,n):(y[t]=ot(o),y[t].c(),y[t].m(s,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=g.length}48&n&&b(t,"--desc","'SOLVED ("+ye(e[5].get(e[7].id))+")'"),16&n&&x(t,"solved",e[7].solved)},d(e){e&&d(t),f(y,e)}}}function rt(t){let n,o=t[4],i=[];for(let e=0;e<o.length;e+=1)i[e]=it(tt(t,o,e));return{c(){n=h("div");for(let e=0;e<i.length;e+=1)i[e].c();$(n,"class","opponent-progress-container svelte-yaogca")},m(e,t){u(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null)},p(e,[t]){if(56&t){let r;for(o=e[4],r=0;r<o.length;r+=1){const s=tt(e,o,r);i[r]?i[r].p(s,t):(i[r]=it(s),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},i:e,o:e,d(e){e&&d(n),f(i,e)}}}function st(t,n,o){let i,r,l,a,c=e,u=()=>(c(),c=s(g,(e=>o(6,r=e))),g),d=e,f=()=>(d(),d=s(m,(e=>o(4,l=e))),m),h=e,p=()=>(h(),h=s($,(e=>o(5,a=e))),$);t.$$.on_destroy.push((()=>c())),t.$$.on_destroy.push((()=>d())),t.$$.on_destroy.push((()=>h()));let{users:m=ne}=n;f();let{gameProblem:g=ie}=n;u();let{timeTakenByOpponents:$=fe}=n;return p(),t.$$set=e=>{"users"in e&&f(o(0,m=e.users)),"gameProblem"in e&&u(o(1,g=e.gameProblem)),"timeTakenByOpponents"in e&&p(o(2,$=e.timeTakenByOpponents))},t.$$.update=()=>{64&t.$$.dirty&&o(3,i=$e(r))},[m,g,$,i,l,a,r]}class lt extends K{constructor(e){super(),Y(this,e,st,rt,r,{users:0,gameProblem:1,timeTakenByOpponents:2})}}function at(t){let n,o={ctx:t,current:null,token:null,hasCatch:!1,pending:ft,then:dt,catch:ut,value:7};var i;return function(e,t){const n=t.token={};function o(e,o,i,r){if(t.token!==n)return;t.resolved=r;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=r);const l=e&&(t.current=e)(s);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(B(),L(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),U())})):t.block.d(1),l.c(),z(l,1),l.m(t.mount(),t.anchor),a=!0),t.block=l,t.blocks&&(t.blocks[o]=l),a&&N()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=P();if(e.then((e=>{C(n),o(t.then,1,t.value,e),C(null)}),(e=>{if(C(n),o(t.catch,2,t.error,e),C(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var i}((i=me,new Promise((e=>{const t=oe.subscribe((n=>{if(""===n)return;const o=be.connect(i);setTimeout((()=>t())),we(o).then(e)}))}))),o),{c(){n=p(""),o.block.c()},m(e,t){u(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,n){!function(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}(o,t=e,n)},i:e,o:e,d(e){e&&d(n),o.block.d(e),o.token=null,o=null}}}function ct(t){let n,o;return n=new et({}),{c(){F(n.$$.fragment)},m(e,t){V(n,e,t),o=!0},p:e,i(e){o||(z(n.$$.fragment,e),o=!0)},o(e){L(n.$$.fragment,e),o=!1},d(e){W(n,e)}}}function ut(t){return{c:e,m:e,p:e,d:e}}function dt(t){let n;return{c(){n=h("p"),n.textContent=`Successfully connected to ${me}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function ft(t){let n;return{c(){n=h("p"),n.textContent=`Connecting to ${me}`},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function ht(e){let t,n,o,i;return t=new lt({}),o=new Ke({props:{problem:e[0]}}),o.$on("progress",e[4]),o.$on("solved",e[5]),{c(){F(t.$$.fragment),n=m(),F(o.$$.fragment)},m(e,r){V(t,e,r),u(e,n,r),V(o,e,r),i=!0},p(e,t){const n={};1&t&&(n.problem=e[0]),o.$set(n)},i(e){i||(z(t.$$.fragment,e),z(o.$$.fragment,e),i=!0)},o(e){L(t.$$.fragment,e),L(o.$$.fragment,e),i=!1},d(e){W(t,e),e&&d(n),W(o,e)}}}function pt(t){let n,o,i,r,s,l,a,f,p,v;const y=[ct,at],b=[];r=ge?0:1,s=b[r]=y[r](t),a=new Ze({});let x=t[0]&&ht(t),w=ge&&function(t){let n,o,i;return{c(){n=h("button"),n.textContent="New Problem",$(n,"class","svelte-3fadq2")},m(e,r){u(e,n,r),o||(i=g(n,"click",t[1]),o=!0)},p:e,d(e){e&&d(n),o=!1,i()}}}(t);return{c(){n=h("canvas"),o=m(),i=h("main"),s.c(),l=m(),F(a.$$.fragment),f=m(),x&&x.c(),p=m(),w&&w.c(),$(n,"id","confetti"),$(n,"class","svelte-3fadq2"),$(i,"class","svelte-3fadq2")},m(e,t){u(e,n,t),u(e,o,t),u(e,i,t),b[r].m(i,null),c(i,l),V(a,i,null),c(i,f),x&&x.m(i,null),c(i,p),w&&w.m(i,null),v=!0},p(e,[t]){s.p(e,t),e[0]?x?(x.p(e,t),1&t&&z(x,1)):(x=ht(e),x.c(),z(x,1),x.m(i,p)):x&&(B(),L(x,1,1,(()=>{x=null})),U()),ge&&w.p(e,t)},i(e){v||(z(s),z(a.$$.fragment,e),z(x),v=!0)},o(e){L(s),L(a.$$.fragment,e),L(x),v=!1},d(e){e&&d(n),e&&d(o),e&&d(i),b[r].d(),W(a),x&&x.d(),w&&w.d()}}}function mt(e,t,n){let o,i,r;a(e,ae,(e=>n(2,o=e))),a(e,ne,(e=>n(3,i=e))),a(e,ie,(e=>n(0,r=e)));const s=(()=>{let e=0;const t=fetch(`./quotes/${parseInt(8*Math.random())}.json`).then((e=>e.json())).then(H);return async()=>{const n=await t,o=n[e++%n.length];return{author:o.quoteAuthor,text:G(o.quoteText)}}})();return e.$$.update=()=>{e.$$.dirty,4&e.$$.dirty&&o&&De.addConfetti()},[r,()=>{s().then((e=>ie.set((e=>{const t=e.text.toUpperCase(),n=Z(),o=[...t].map((e=>n[X.indexOf(e)]??e)).join("");return{...e,plaintext:t,ciphertext:o}})(e))))},o,i,e=>le.set(e.detail.progress),()=>ae.set(!0)]}const gt=new class extends K{constructor(e){super(),Y(this,e,mt,pt,r,{})}}({target:document.body,props:{name:"world"}});return"undefined"!=typeof module&&module.hot&&("undefined"!=typeof module&&module.hot.dispose((()=>{gt.$destroy()})),"undefined"!=typeof module&&module.hot.accept()),gt}();
//# sourceMappingURL=bundle.js.map
